{
  "statements": [
  {
    "query": "MATCH (n:CidrBlock)<-[:BLOCK_ASSOCIATION]-(:EC2Subnet)-[r:MEMBER_OF_AWS_VPC]->(:AWSVpc)<-[:RESOURCE]-(:AWSAccount{id: {AWS_ID}}) WHERE n.lastupdated <> {UPDATE_TAG} WITH n LIMIT {LIMIT_SIZE} DETACH DELETE (n) return COUNT(*) as TotalCompleted",
    "iterative": true,
    "iterationsize": 100
  },
  {
    "query": "MATCH (:CidrBlock)<-[r:BLOCK_ASSOCIATION]-(:EC2Subnet)-[rv:MEMBER_OF_AWS_VPC]->(:AWSVpc)<-[:RESOURCE]-(:AWSAccount{id: {AWS_ID}}) WHERE r.lastupdated <> {UPDATE_TAG} WITH r LIMIT {LIMIT_SIZE} DELETE (r) return COUNT(*) as TotalCompleted",
    "iterative": true,
    "iterationsize": 100
  },
  {
    "query": "MATCH (:RouteTable)-[r:SUBNET_ASSOCIATION]->(:EC2Subnet)-[:MEMBER_OF_AWS_VPC]->(:AWSVpc)<-[:RESOURCE]-(:AWSAccount{id: {AWS_ID}}) WHERE r.lastupdated <> {UPDATE_TAG} WITH r LIMIT {LIMIT_SIZE} DELETE (r) return COUNT(*) as TotalCompleted",
    "iterative": true,
    "iterationsize": 100
  },
  {
    "query": "MATCH (:AWSAccount{id: {AWS_ID}})-[:RESOURCE]->(:AWSVpc)<-[r:MEMBER_OF_AWS_VPC]-(n:EC2Subnet) WHERE n.lastupdated <> {UPDATE_TAG} WITH n LIMIT {LIMIT_SIZE} DETACH DELETE (n) return COUNT(*) as TotalCompleted",
    "iterative": true,
    "iterationsize": 100
  }
  ],
  "name": "cleanup Subnet"
}
